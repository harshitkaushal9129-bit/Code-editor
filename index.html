<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DevStudio Pro - Professional IDE</title>
    
    <meta name="theme-color" content="#007acc">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="Kaushalji.png">

    <style>
        :root { --bg: #1e1e1e; --side: #333333; --activity: #2c2c2c; --text: #cccccc; --accent: #007acc; --border: #3c3c3c; }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); color: white; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }

        /* Activity Bar (Side) */
        .main-container { display: flex; flex: 1; overflow: hidden; }
        .activity-bar { width: 50px; background: var(--activity); display: flex; flex-direction: column; align-items: center; padding-top: 15px; gap: 20px; border-right: 1px solid var(--border); }
        .act-icon { cursor: pointer; font-size: 22px; color: #858585; }
        .act-icon:hover, .act-icon.active { color: white; }

        /* Sidebar Explorer */
        .sidebar { width: 200px; background: #252526; border-right: 1px solid var(--border); display: flex; flex-direction: column; }
        @media (max-width: 768px) { .sidebar { display: none; } }
        .side-title { padding: 10px; font-size: 11px; font-weight: bold; color: #888; text-transform: uppercase; }
        .file { padding: 8px 15px; font-size: 13px; cursor: pointer; display: flex; align-items: center; gap: 8px; }
        .file:hover { background: #2a2d2e; }
        .file.active { background: #37373d; }

        /* Editor & Tabs */
        .editor-area { flex: 1; display: flex; flex-direction: column; border-right: 1px solid var(--border); }
        .tabs { background: #2d2d2d; display: flex; height: 35px; border-bottom: 1px solid var(--border); }
        .tab { padding: 0 20px; font-size: 13px; color: #969696; background: #2d2d2d; border-right: 1px solid var(--border); cursor: pointer; display: flex; align-items: center; height: 100%; }
        .tab.active { background: var(--bg); color: white; border-top: 1px solid var(--accent); }

        .code-container { flex: 1; position: relative; }
        textarea { position: absolute; width: 100%; height: 100%; background: var(--bg); color: #9cdcfe; border: none; padding: 20px; font-family: 'Consolas', monospace; font-size: 14px; outline: none; resize: none; display: none; line-height: 1.6; }
        textarea.active { display: block; }

        /* Preview Area */
        .preview-area { width: 40%; background: white; display: flex; flex-direction: column; }
        @media (max-width: 768px) { .preview-area { width: 100%; height: 300px; } }
        .preview-bar { background: #f3f3f3; color: #333; padding: 5px 12px; font-size: 12px; font-weight: bold; border-bottom: 1px solid #ddd; }
        iframe { flex: 1; border: none; background: white; }

        /* Status Bar (Bottom) */
        .status-bar { background: var(--accent); height: 22px; display: flex; justify-content: space-between; align-items: center; padding: 0 10px; font-size: 12px; color: white; }
    </style>
</head>
<body>

<div class="main-container">
    <div class="activity-bar">
        <div class="act-icon active">üìÇ</div>
        <div class="act-icon">üîç</div>
        <div class="act-icon">‚öôÔ∏è</div>
        <div style="flex:1"></div>
        <div id="installBtn" class="act-icon" title="Install App" style="display:none; color:#4caf50;">üì•</div>
    </div>

    <div class="sidebar">
        <div class="side-title">Explorer</div>
        <div class="file active" onclick="switchFile('html')">üìÑ index.html</div>
        <div class="file" onclick="switchFile('css')">üé® style.css</div>
        <div class="file" onclick="switchFile('js')">‚ö° script.js</div>
    </div>

    <div class="editor-area">
        <div class="tabs">
            <div id="tab-html" class="tab active" onclick="switchFile('html')">index.html</div>
            <div id="tab-css" class="tab" onclick="switchFile('css')">style.css</div>
            <div id="tab-js" class="tab" onclick="switchFile('js')">script.js</div>
        </div>
        <div class="code-container">
            <textarea id="html-ed" class="active" oninput="run()" spellcheck="false" placeholder=""></textarea>
            <textarea id="css-ed" oninput="run()" spellcheck="false" placeholder="/* CSS */"></textarea>
            <textarea id="js-ed" oninput="run()" spellcheck="false" placeholder="// JS"></textarea>
        </div>
    </div>

    <div class="preview-area">
        <div class="preview-bar">BROWSER PREVIEW</div>
        <iframe id="res"></iframe>
    </div>
</div>

<div class="status-bar">
    <div>Ready</div>
    <div>DevStudio v1.0.8 | Made by Kaushal</div>
</div>

<script>
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('./sw.js')
            .then(() => console.log("PWA: Ready"))
            .catch(err => console.log("PWA: Failed", err));
        });
    }
</script>

<script>
    let currentFile = 'html';

    // File Switching Logic
    function switchFile(type) {
        currentFile = type;
        // Tabs update
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.getElementById('tab-' + type).classList.add('active');
        // Textarea update
        document.querySelectorAll('textarea').forEach(t => t.classList.remove('active'));
        document.getElementById(type + '-ed').classList.add('active');
        // Sidebar update
        document.querySelectorAll('.file').forEach(f => f.classList.remove('active'));
        event.currentTarget.classList.add('active');
    }

    // Live Preview Logic
    function run() {
        const h = document.getElementById('html-ed').value;
        const c = "<style>" + document.getElementById('css-ed').value + "</style>";
        const j = "<script>" + document.getElementById('js-ed').value + "<\/script>";
        const target = document.getElementById('res').contentWindow.document;
        target.open(); target.write(h + c + j); target.close();
    }

    // PWA Install Logic
    let promptEvt;
    window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        promptEvt = e;
        document.getElementById('installBtn').style.display = 'block';
    });

    document.getElementById('installBtn').onclick = () => {
        if(promptEvt) {
            promptEvt.prompt();
            promptEvt.userChoice.then(res => {
                if(res.outcome === 'accepted') document.getElementById('installBtn').style.display = 'none';
            });
        }
    };
    
    // Default Run
    run();
</script>

</body>
</html>
